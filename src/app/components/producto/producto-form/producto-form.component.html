<form [formGroup]="form" class="p-4 rounded shadow-sm bg-white">
  <div class="mb-4 border-bottom pb-2">
    <h2 class="fw-bold text-black mb-0">
      {{ isEdit ? 'Editar Producto' : 'Agregar Producto a Categoría' }}
    </h2>
  </div>

  <div class="row g-4">
    <div class="col-md-6">
      <label class="form-label fw-semibold" for="name">Nombre</label>
      <input id="name" formControlName="name" type="text" class="form-control form-control-lg rounded-3 border-secondary-subtle shadow-sm">
      @if (form.controls['name'].invalid && (form.controls['name'].dirty || form.controls['name'].touched)) {
        <p class="text-danger mt-1">El nombre es obligatorio</p>
      }
    </div>

    <div class="col-md-3">
      <label class="form-label fw-semibold" for="price">Precio</label>
      <input id="price" formControlName="price" type="number" step="0.01" class="form-control form-control-lg rounded-3 border-secondary-subtle shadow-sm">
    </div>

    <div class="col-md-3">
      <label class="form-label fw-semibold" for="stock">Stock</label>
      <input id="stock" formControlName="stock" type="number" class="form-control form-control-lg rounded-3 border-secondary-subtle shadow-sm">
    </div>
  </div>


  @if (showCategorySelector) {
    <div class="row g-4 mt-3">
      <div class="col-md-12">
        <label class="form-label fw-semibold" for="categoria">Categoría</label>
        <select id="categoria" formControlName="categoria" class="form-select form-select-lg rounded-3 border-secondary-subtle shadow-sm">
          <option [ngValue]="null">Seleccione una categoría</option>
          @for (categoria of categorias; track categoria.id) {
            <option [ngValue]="categoria">{{ categoria.name }}</option>
          }
        </select>
        @if (form.controls['categoria'].invalid && (form.controls['categoria'].dirty || form.controls['categoria'].touched)) {
          <p class="text-danger mt-1">Debe seleccionar una categoría</p>
        }
      </div>
    </div>
  }

  <div class="row g-4 mt-3">
    <div class="col-md-12">
      <label class="form-label fw-semibold" for="description">Descripción</label>
      <textarea id="description" formControlName="description" class="form-control form-control-lg rounded-3 border-secondary-subtle shadow-sm" rows="3"></textarea>
    </div>
  </div>

  <div class="d-flex justify-content-end mt-4">
    <button
      (click)="callSaveMethod.emit(form.value)"
      [disabled]="form.invalid"
      type="button"
      class="btn text-white fw-semibold px-5 py-2 rounded-pill border-0 shadow-sm"
      [ngStyle]="{'background-color': '#ff69b4', 'opacity': form.invalid ? '0.6' : '1'}">
      {{ isEdit ? 'Actualizar Producto' : 'Agregar Producto' }}
    </button>
  </div>
</form>
